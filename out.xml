<?xml version="1.0"?>
<powerstream
	win_run_path="%%runpath2"
	unix_run_path="%%runpath"
	name="powerstream"
	>
	<project
		name="%%my_name"
		client="%%my_client"
		client_code="%%my_client_code"
		project="%%my_project"
		project_code="%%my_project_code"
		project_id="%%my_pid"
		location="%%my_location"
		location_code="%%my_location_code"
		sales_code="%%sales"
		project_manager_name="%%my_project_manager_name"
		project_manager="%%my_project_manager"
		project_manager_email="%%my_project_manager_email"
		programmer_name="%%my_programmer_name"
		programmer="%%my_programmer"
		programmer_email="%%my_programmer_email"
		disable="n"
	/>
	<processes
		ver="%%ver"
		arch="3"
		jobcond="4"
		jobtype="distribution"
		reset_files="y"
		reset_qual_info="n"
		email_error="n"
		emlto_error="\$programmer_email"
		site="$my_site"
		psite="$my_psite"
		csite="$my_csite"
		msite="$my_msite"
		asite="$my_asite"
		sbu="ins"
		household="$my_household"
		dis_household="y"
		verimove="$my_verimove"
		dis_verimove="y"
		pivot_track="$my_pivot_track"
		dis_pivot_proof="y"
		pivot_proof="$my_pivot_proof"
		dis_pivot_track="y"
		pivot_archive="$my_pivot_archive"
		dis_pivot_archive="y"
		pivot_report="$my_pivot_report"
		dis_pivot_report="y"
		my_vmvid="$client_vmvid"
		adf_type="mrdf"
		chunk_qty="20000"
		brk_type="pages"
		mstmf="n"
		mdate="00000000"
		mclass="1"
		permt="$my_permit"
		printer="$my_printer"
		printer_type="$my_printer_type"
		ffile="$SITE$LVL.$SBU.$PI$n.$PJT"
		rundir="$pi${n}_$c"
		pjtpath="/bcs/$psite$lvlc/clientapp/$pi$pjt/"
		runpath="/bcs/$psite$lvl/clientapp/$pi$pjt/run/$rundir/"
		passpath="/bcs/$psite$lvl/clientapp/$pi$pjt/pass/"
		genlib="/apps/powerstream/gen$levels$tver/"
		usrinputs="${pjtpath}input/"
		usrscripts="${pjtpath}scripts/"
		usrskels="${pjtpath}skel/"
		usrloads="${pjtpath}load/"
		usrparms="${pjtpath}parm/"
		usrresources="${pjtpath}parm/"
		usrruns="${pjtpath}run/"
		usrarcs="/arc/$psite$lvlc/"
		genskels="${genlib}skel/"
		genloads="${genlib}load/"
		genparms="${genlib}parm/"
		genscripts="${genlib}perl/"
		genperls="${genlib}perl/"
		gencopys="${genlib}copy/"
		arcrep="30;"
		include_dir="${pjtpath}parm/outobjects/"
		name="processes"
		gsvers="/apps/ghostscript_9.10/bin/gs"
		test_module_library="$usrscripts"
		Dialogue_Version="V9R0M112SB"
		disable="n"
		>
		<defaults
			name="defaults"
			lvl="t"
			lvlc="t"
			lvls="p"
			n="9999"
			c="01"
			copy_base="$c"
			jobid="00"
			sales="8000"
			sr="$sales"
			project_id="$my_pid"
			location="$my_location"
			location_code="$my_location_code"
			infile="/bcs/$site$lvl/clientapp/$pi$pjt/input/"
			reprint="$FFILE.MISS${JOBID}V$v"
			inreprint="/bcs/lgn$lvl/input/$reprint"
			auto_order_number="y"
			orderNumberSave="y"
			get_day="none"
			mailsize="l"
			diskoption="isilon"
			sol_val="n"
			auto_arcstore_force="y"
			xmtovr="False"
			disable_xmit="n"
			xmit_on="y"
			mailer_id=""
			sftp_out=""
			sftp_in=""
			jss_user_field=""
			epcsnd="y"
			jss_dis="y"
			msort="n"
			tplcli=""
			tplext=""
			tplsuf=""
			tpldesdir=""
			mask_base="pdn"
			outmask="${mask_base}o${mask_id}.c${c}xx.cr"
			ver="04r20a"
			_ver="int13087"
			mailgroup="1"
			maxsheets="5"
			pdpver="/apps/poppler_0.51/bin/"
			doc_composer="$my_comp_type"
			pwrstrm_composer="annot"
			paper_stock="NULL"
			paper_weight="NULL"
			paper_thickness="NULL"
			gmc_chunk_size="NaN"
			gmc_input_type="NULL"
			hhd_option="$my_hhd_option"
			my_tplpri="$tplpri"
			pstgcode="$my_pstgcode"
			subcode="$my_subcode"
			client="$my_client"
			client_code="$my_client_code"
			project="$my_project"
			project_code="$my_project_code"
			project_manager_name="$my_project_manager_name"
			project_manager="$my_project_manager"
			project_manager_email="$my_project_manager_email"
			programmer_name="$my_programmer_name"
			programmer="$my_programmer"
			programmer_email="$my_programmer_email"
			pivot_id="$my_pivot_id"
			pub_file="$my_pub_file"
			outobject_type="NULL"
			erd_type="NULL"
			disable="n"
		/>
		<process
			name="full_process"
			disable="n"
			>
			<module
				name="pre_setup_prod"
				modname="genpre01"
				precpy="m"
				preorg="y"
				disable="t"
			/>
			<module
				name="pre_setup_test"
				modname="genpre01"
				precpy="y"
				preorg="y"
				disable="p"
			/>
			<module
				name="dupcheck_$post"
				modname="gendup01"
				dupact="2"
				dupfr="\$project_manager_email"
				dupmask1="$inwork"
				dupto="\$project_manager_email,\$programmer_email"
				duptto="\$programmer_email"
				disable="tr"
			/>
			<loop
				name="loop_pre_process"
				loop_end="1"
				loop_inc="1"
				loop_start="1"
				disable="n"
				>
				<subprocess
					name="pre_process_0$loop_counter"
					input="0$loop_counter"
					processname="pre_process"
					disable="n"
				/>
				</loop>
			<subprocess
				name="mid_process"
				processname="mid_process"
				disable="n"
			/>
			<loop
				name="loop_post_process"
				loop_start="1"
				loop_end="1"
				loop_inc="1"
				disable="n"
				>
				<if
					name="if_for_loop_post_process"
					disable="n"
					>
					<condition
						name="condition_for_loop_post_process_1"
						disable="n"
						>
						<![CDATA[ ($loop_counter==1) ]]>
						<assign
							name="assign_post_process_loop_$c"
							c="01"
							post="$c"
							msize="$mailsize"
							_msort="y"
							postfile="${runpath}c${c}_batout.txt"
							outmask="$outmask"
							disable="n"
						/>
						</condition>
					</if>
				<module
					name="post_process_check_0$loop_counter"
					modname="genemp01"
					empinp="$postfile"
					disable="n"
				/>
				<if
					name="if_post_process_empty_check_0$loop_counter"
					disable="n"
					>
					<condition
						name="condition_post_process_empty_check_0$loop_counter"
						disable="n"
						>
						<![CDATA[ ($emprc == 0) ]]>
						<subprocess
							name="post_process_0$loop_counter"
							processname="post_process"
							disable="n"
						/>
						</condition>
					<else
						name="else_post_process_empty_check_0$loop_counter"
						disable="n"
						>
						<module
							name="empty_file_for_0$loop_counter"
							modname="genemf01"
							emffrp="n"
							emfbat="$batchid"
							emftyp="copy"
							emfeml="n"
							disable="n"
						/>
						<module
							name="archiving_empty"
							modname="genarc02"
							arcrmd="n"
							arcforce="y"
							disable="n"
						/>
						</else>
					</if>
				</loop>
			<subprocess
				name="final_process"
				processname="final_process"
				disable="n"
			/>
			</process>
		<!-- ================================================================================================ -->
		<!-- Extra Processes to be called as needed -->
		<!-- ================================================================================================ -->
		<process
			name="pdfinput_dir_process"
			disable="n"
			>
			<system
				name="make_pdf_dir_if_needed"
				command="if test -d ${runpath}pdf_files; then echo 'Directory ${runpath}pdf_files already exists'; else mkdir ${runpath}pdf_files; fi"
				disable="n"
			/>
			<if
				name="if_input_is_zip"
				disable="n"
				>
				<condition
					name="condition_file_list_select"
					disable="n"
					>
					<![CDATA[ ($inwork =~ /.*\.zip$/i) ]]>
					<module
						name="unzip"
						modname="genuzp01"
						uzpname="$inwork"
						uzpdir="${runpath}pdf_files"
						disable="n"
					/>
					</condition>
				<else
					>
					<module
						name="copy_pdfs_to_directory$post"
						modname="gencpy01"
						cpyinp="$inwork"
						cpyout="${runpath}pdf_files/"
						disable="n"
					/>
					</else>
				</if>
			</process>
		<process
			name="pdfinput_process"
			disable="n"
			>
			<subprocess
				name="unzip_or_copy_input_for_gmc_usage"
				processname="pdfinput_dir_process"
				disable="n"
			/>
			<assign
				name="assign_gmc_defaults"
				gmc_Workflow="${usrparms}${gmc_wfd_name}"
				gmc_Infile="${runpath}pdf_files"
				gmc_outfile="${pre}.outpdf.${loop_counter}"
				gmc_Job="${usrparms}${gmc_job_name}"
				gmc_file_chunk="XXXX"
				disable="n"
			/>
			<module
				name="gmc_pdf"
				modname="gmc_motor"
				gmc_cmd="${gmc_Workflow} -pdfdirPDFInput ${gmc_Infile} -e PDF -o Production -c ${gmc_Job} -f ${gmc_outfile} -l ${runpath}gmc_log${loop_counter}"
				gmc_motor_control="${pre}.gmcmsgs${loop_counter}"
				gmc_message_file="$pre.gmcmsgs${loop_counter}"
				powerapp_path="/apps/services/powerapps/5.0.0/"
				disable="n"
			/>
			<module
				name="extract_0$loop_counter"
				modname="genext01"
				RECON_STEP_NAME="INPUT CHUNK: $gmc_file_chunk"
				extrac="${pre}.extrac${loop_counter}"
				diskoption="isilon"
				extinp="${gmc_outfile}"
				extsto="$extinp"
				extrcn="${pre}.extrcn${loop_counter}"
				disable="n"
			/>
			<module
				name="cat_recons"
				modname="gencat01"
				catinp="$pre.extrac*"
				catout="$pre.extraccomb$post"
				catapp="n"
				disable="n"
			/>
			<command
				name="perl_for_client_count_0$loop_counter"
				disable="n"
				>
				<![CDATA[					
					use POSIX;					
					$validsheetcount=0;					
					$validpagecount=0;					
					$validpackagecount=0;					
					$validpackagecount = `cat $pre.extraccomb$post | wc -l`;					
					$validsheetcount = ceil($validpackagecount/2);					
					$validpagecount = $validpackagecount;					
								]]>
				</command>
			<module
				name="custom_client_recon_feed_0$loop_counter"
				modname="genrcx01"
				rcxdes="Custom Client Counts $loop_counter"
				rcxdocumentstotal="$validpackagecount"
				rcxopt="s"
				rcxpagestotal="$validpagecount"
				rcxrcn="$pre.client.counts"
				rcxsheetstotal="$validsheetcount"
				rcxtyp="client"
				disable="n"
			/>
			<module
				name="cat_recons"
				modname="gencat01"
				catinp="$pre.extrcn*"
				catout="$pre.extrcncomb$post"
				catapp="n"
				disable="n"
			/>
			</process>
		<process
			name="gmc_process"
			disable="n"
			>
			<!-- Make GMC assignments, turns things on and off -->
			<!-- NOTE: These assign settings and the gmc_cmd variable will need to be adjusted according to your needs -->
			<system
				name="Forks input files into smaller chunks"
				command="/apps/python_2.7/bin/python2.7 ${usrscripts}fork_file_data.py ${inwork} $gmc_chunk_size"
				memo="Fork process to decrease GMC process time"
				disable="n"
			/>
			<loop
				name="loop_fork_input_file"
				loop_dir="${runpath}"
				loop_filemask="${inbasename}*chnk_*"
				loop_process_save_log="n"
				loop_max_process="5"
				disable="n"
				>
				<assign
					name="assign_gmc_defaults"
					gmc_Workflow="${usrparms}${gmc_wfd_name}"
					gmc_Infile="$loop_dir_curfile"
					gmc_outfile="${pre}.outpdf.${loop_counter}"
					gmc_Job="${usrparms}${gmc_job_name}"
					gmc_file_chunk="XXXX"
					disable="n"
				/>
				<command
					stepname="set_gmc_input_module"
					disable="n"
					>
					<![CDATA[
						# set input module to call in GMC command
						if ($gmc_input_type =~ /xml/i)
						{
						$gmc_input_module = "XMLDataInput1";
						}
						elsif ($gmc_input_type =~ /std/i)
						{
						$gmc_input_module = "QTL2";
						}
						else
						{
						die "Invalid \$gmc_input_type value: $gmc_input_type - Expected xml or std.";
						}
					]]>
					</command>
				<command
					stepname="get_filetype"
					disable="n"
					>
					<![CDATA[
						$inbasename =~ /LGN[TP]\.FIN\.GNW0000\.(.
						{
})/;
						$template_Type = $1;
						print "File Type: $template_Type\n";
					]]>
					</command>
				<module
					name="gmc_pdf"
					modname="gmc_motor"
					gmc_cmd="${gmc_Workflow} -InputFileParamInput1 $template_Type -dif${gmc_input_module} ${gmc_Infile} -e PDF -o Production -c ${gmc_Job} -useincluded Workflow -f ${gmc_outfile} -l ${runpath}gmc_log${loop_counter}"
					gmc_motor_control="${pre}.gmcmsgs${loop_counter}"
					gmc_message_file="$pre.gmcmsgs${loop_counter}"
					powerapp_path="/apps/services/powerapps/5.0.0/"
					disable="n"
				/>
				<command
					stepname="get_chunk_name"
					disable="n"
					>
					<![CDATA[
						# get chunk name from the current input file.
						if ($loop_curfile =~ /.*chnk\_(\d+)/)
						{
						$gmc_file_chunk = $1;
						}
						print "\$gmc_file_chunk: $gmc_file_chunk\n";
						print "\$loop_curfile: $loop_curfile\n";
					]]>
					</command>
				<module
					name="extract_0$loop_counter"
					modname="genext01"
					RECON_STEP_NAME="INPUT CHUNK: $gmc_file_chunk"
					extrac="${pre}.extrac${loop_counter}"
					extinp="${gmc_outfile}"
					extsto="$extinp"
					extrcn="${pre}.extrcn${loop_counter}"
					disable="n"
				/>
				</loop>
			<module
				name="cat_recons"
				modname="gencat01"
				catinp="$pre.extrac*"
				catout="$pre.extraccomb$post"
				catapp="n"
				disable="n"
			/>
			<module
				name="cat_recons"
				modname="gencat01"
				catinp="$pre.extrcn*"
				catout="$pre.extrcncomb$post"
				catapp="n"
				disable="n"
			/>
			</process>
		<process
			name="dialogue_process"
			disable="n"
			>
			<makefile
				name="make_dialogue_control_file_0$loop_counter"
				file_name="$pre.diactl$post"
				remove_makefile_leading_spaces="y"
				disable="n"
				>
				<![CDATA[
				>>FILE_START
				-CONTROLFILE=/apps/dialogue/${Dialogue_Version}/key
				-MSGRESOURCE=/apps/dialogue/${Dialogue_Version}/MsgResource_en-us.dat
				-PACKAGEFILE=${usrparms}${pub_file}
				-MESSAGEFILE=$pre.exmsgs01
				-FILEMAP=DD:INPUT,$inwork
				-FILEMAP=DD:EXTRACT,$pre.extraccomb$post
				-FILEMAP=DD:OUTPDF,$pre.outpdf01
				-RUNMODE=PRODUCTION
				-TRACKIN=DISABLE
				-TRACKOUT=NONE
				-REPORT=NONE
				-MSG=1850,W
				>>FILE_END
								]]>
				</makefile>
			<system
				name="dialogue_execution_0$loop_counter"
				command="/apps/dialogue/${Dialogue_Version}/Engine -CONTROLFILE='$file_name'"
				disable="n"
			/>
			<module
				name="extract"
				modname="genext01"
				extnum="01"
				extinp="$pre.outpdf01"
				extrac="$pre.extraccomb$post"
				extsto="$extinp"
				extres="$pre.resour01"
				extaud="$pre.audrpt01"
				extsid="$pre.extsid01"
				extrcn="$pre.extrcncomb$post"
				id="22"
				memo=""
				pwrstrm_composer="dialogue"
				disable="n"
			/>
			</process>
		<process
			name="site_select_process"
			disable="n"
			>
			<if
				name="if_file_list_select"
				disable="n"
				>
				<condition
					name="condition_file_list_select"
					disable="n"
					>
					<![CDATA[ ($app_process_name eq "reprint_process") ]]>
					<assign
						name="assign_damaged_file_list"
						Lst_file="$pre.dmglst${post}"
						disable="n"
					/>
					</condition>
				<else
					>
					<assign
						name="assign_normal_file_list"
						Lst_file="$pre.outlst$post"
						disable="n"
					/>
					</else>
				</if>
			<if
				name="if_msite_location"
				disable="n"
				>
				<!-- - print in Logan -->
				<condition
					name="condition_msite_eq_lgn"
					disable="n"
					>
					<![CDATA[ ($msite eq "lgn") ]]>
					<assign
						name="assign_erd_type"
						erd_type="copy"
						disable="n"
					/>
					<if
						name="if_printer_selection"
						disable="n"
						>
						<condition
							name="condition_xerox_or_OCE_printers"
							disable="n"
							>
							<![CDATA[ ($printer =~ /xerox|oce/i) ]]>
							<module
								name="add_tray_call"
								modname="genatj01"
								atjinp="$pre.*cr????"
								atjjog="n"
								duplex="y"
								disable="n"
							/>
							</condition>
						<!-- print in Logan. Needs to be Low to High, face-up for PJ -->
						<condition
							name="condition_proteus_jet_printer"
							disable="n"
							>
							<![CDATA[ ($printer eq "pro") ]]>
							<loop
								name="nupimposeloop"
								loop_data_file="$Lst_file"
								disable="n"
								>
								<module
									name="reorder_pages"
									modname="genreo01"
									reoinp="$runpath$loop_curline"
									reotyp="r"
									reover="2"
									disable="n"
								/>
								</loop>
							</condition>
						</if>
					<module
						name="tapeless_$batchid$c"
						modname="gentpl01"
						_tplsuf="$my_tplsuf"
						_tplext=".pdf"
						tpllst="$Lst_file"
						tplpri="$my_tplpri"
						disable="n"
					/>
					</condition>
				<!-- - print in Chicago -->
				<condition
					name="condition_msite_eq_chg"
					disable="n"
					>
					<assign
						name="assign_erd_type"
						erd_type="copy"
						disable="n"
					/>
					<![CDATA[ ($msite eq "chg") ]]>
					<module
						name="tapeless_$batchid$c"
						modname="gentpl01"
						_tplsuf="$my_tplsuf"
						_tplext=".pdf"
						tpllst="$Lst_file"
						tplpri="$my_tplpri"
						disable="n"
					/>
					</condition>
				<!-- - print in Dallas -->
				<condition
					name="condition_msite_eq_dal"
					disable="n"
					>
					<![CDATA[ ($msite eq "dal") ]]>
					<assign
						name="assign_erd_type"
						erd_type="batch"
						disable="n"
					/>
					<module
						name="tapeless_$batchid$c"
						modname="gentpl01"
						tplext=".pdf"
						tpllst="$Lst_file"
						tplpri="com"
						disable="n"
					/>
					<!--
					For JSS Need to change the below variable. Information comes from PM.
					jsscpnm="Concerto Letters"
					jssapcd="CON$c"
					-->
					<module
						stepname="genjss01"
						modname="genjss01"
						jssspmd="STD"
						jsscpnm=""
						jssapcd=""
						jsscrid="$or"
						jssstid="LEW"
						jsspcts="006"
						jssusd1=""
						jssusd2=""
						jssreprint=""
						jssxmit="y"
						jssn="$n"
						jssc="$c"
						jssusecpy="y"
						disable="n"
					/>
					<!--
					Below parts disabled. Only use if job will require clippership.
					Dallas is implementing WBS system in the future.
					-->
					<module
						name="fedex_file_exist"
						modname="genemp01"
						empinp="$pre.repext$post"
						disable="y"
					/>
					<if
						name="if_clippership_file"
						disable="y"
						>
						<condition
							name="condition_clippership_file"
							disable="n"
							>
							<![CDATA[ ($emprc == 0) ]]>
							<system
								name="run_clipper_script"
								command="perl ${usrscripts}clippership_data_file.pl $pre.repext$post $pre $runpath"
								memo=""
								disable="n"
							/>
							<module
								stepname="xmit_clippership_files"
								modname="genxmt01"
								xmtinp="$pre.06.csv"
								xmtcfg="label"
								xmtout="$ffile.06.csv"
								disable="n"
							/>
							</condition>
						</if>
					</condition>
				<!-- - print in West Caldwell -->
				<condition
					name="condition_msite_eq_wcw"
					disable="n"
					>
					<![CDATA[ ($msite eq "wcw") ]]>
					<assign
						name="assign_erd_type"
						erd_type="copy"
						disable="n"
					/>
					<module
						name="tapeless_$batchid$c"
						modname="gentpl01"
						tpllst="$Lst_file"
						tplpri="com"
						disable="n"
					/>
					<module
						name="Send_JSS_Files"
						stepname="genjss01"
						modname="genjss01"
						jssspmd="ShipMethod"
						jsscpnm="$my_jssapcd"
						jssapcd="$my_printer"
						jsscrid="$n"
						jssstid="WC"
						jsspcts="500"
						jssusd1=""
						jssusd2=""
						jssxmit="y"
						disable="n"
					/>
					</condition>
				<!-- - print in Thurmont -->
				<condition
					name="condition_msite_eq_thu"
					disable="n"
					>
					<assign
						name="assign_erd_type"
						erd_type="batch"
						disable="n"
					/>
					<![CDATA[ ($msite eq "thu") ]]>
					<loop
						name="loop_crite_files_to_convert_to_afp"
						loop_data_file="$Lst_file"
						disable="n"
						>
						<module
							name="transform ps 8.5 X 11"
							modname="gentrn01"
							trninp="${runpath}${loop_curline}"
							trnout="${runpath}${loop_curline}"
							trntyp="o"
							trnsite="rrd"
							trnSolimar="pdafxxxx"
							data_type="pdf"
							data_type_out="afp"
							disable="n"
						/>
						</loop>
					<module
						name="tapeless_$batchid$c"
						modname="gentpl01"
						_tplsuf="$my_tplsuf"
						_tplext=".pdf"
						tplcli="$pi"
						tpllst="$Lst_file"
						tplpri="$my_tplpri"
						disable="n"
					/>
					</condition>
				<!-- - print in Hyde Park -->
				<condition
					name="condition_msite_eq_hdp"
					disable="n"
					>
					<![CDATA[ ($msite eq "hdp") ]]>
					<assign
						name="assign_erd_type"
						erd_type="batch"
						disable="n"
					/>
					<if
						name="if_printer_selection"
						disable="n"
						>
						<condition
							name="condition_xerox_or_OCE_printers"
							disable="n"
							>
							<![CDATA[ ($printer =~ /xerox/i) ]]>
							<module
								name="add_tray_call"
								modname="genatj01"
								atjinp="$pre.*cr????"
								atjjog="n"
								duplex="y"
								disable="n"
							/>
							</condition>
						</if>
					<module
						name="tapeless_$batchid$c"
						modname="gentpl01"
						_tplsuf="$my_tplsuf"
						_tplext=".pdf"
						tpldesdir="$my_tpldesdir"
						tpllst="$Lst_file"
						tplpri="$my_tplpri"
						disable="n"
					/>
					</condition>
				</if>
			</process>
		<process
			name="stock_code_process"
			disable="n"
			>
			<!-- Set paper attributes as needed -->
			<if
				name="if_set_paper_attributes_by_printer"
				disable="n"
				>
				<condition
					name="condition_xerox_printer"
					disable="n"
					>
					<![CDATA[ ($printer eq "xerox") ]]>
					<!-- print in Logan -->
					<assign
						name="set_paper_attributes_xerox"
						paper_stock="660000"
						paper_weight="01.2"
						paper_thickness="00.46"
						ome_stock="112270"
						ome_thickness="1.220"
						ome_weight="2.43"
						qrec_type="alternating"
						qrec_freq="500"
						qrec_start="500"
						disable="n"
					/>
					</condition>
				<condition
					name="condition_proteus_jet_printer"
					disable="n"
					>
					<![CDATA[ ($printer eq "pro") ]]>
					<!-- print in Logan -->
					<assign
						name="set_paper_attributes_pj"
						paper_stock="089572"
						paper_weight="01.2"
						paper_thickness="00.46"
						ome_stock="112270"
						ome_thickness="1.220"
						ome_weight="2.43"
						qrec_type="inserting"
						qrec_freq="1000"
						qrec_start="1000"
						disable="n"
					/>
					</condition>
				<condition
					name="condition_oce_printer"
					disable="n"
					>
					<![CDATA[ ($printer eq "oce") ]]>
					<!-- print in Logan -->
					<assign
						name="set_paper_attributes_oce"
						paper_stock="095240"
						paper_weight="01.2"
						paper_thickness="00.46"
						ome_stock="112270"
						ome_thickness="1.220"
						ome_weight="2.43"
						qrec_type="alternating"
						qrec_freq="500"
						qrec_start="500"
						disable="n"
					/>
					</condition>
				</if>
			</process>
		<process
			name="sequence_order_process"
			disable="n"
			>
			<!-- Set order of sequence numbers, depending on printer -->
			<if
				name="if_printer_selection"
				disable="n"
				>
				<condition
					name="condition_xerox_or_OCE_printers"
					disable="n"
					>
					<![CDATA[ ($printer =~ /xerox|oce/i) ]]>
					<assign
						name="set_sequence_number_order_XEROX"
						RUN_SHEET_SETTING="RUN_SHEET_ALL"
						disable="n"
					/>
					</condition>
				<!-- print in Logan. Needs to be Low to High, face-up for PJ -->
				<condition
					name="condition_proteus_jet_printer"
					disable="n"
					>
					<![CDATA[ ($printer eq "pro") ]]>
					<assign
						name="set_sequence_number_order_PJ"
						RUN_SHEET_SETTING="RUN_SHEET_ALL_DESC"
						disable="n"
					/>
					</condition>
				</if>
			</process>
		<!-- ================================================================================================ -->
		<!-- Actual job starts processing here -->
		<!-- ================================================================================================ -->
		<process
			name="pre_process"
			disable="n"
			>
			<module
				name="auto_order_update"
				modname="genoup01"
				disable="t"
			/>
			<if
				name="if_lvl_eq_t"
				disable="n"
				>
				<condition
					name="condition_lvl_eq_t"
					memo="if test turn off email and ftp"
					>
					<![CDATA[ ($lvl eq "t") ]]>
					<assign
						email_on="n"
						ftp_on="n"
						_xmit_on="n"
						disable="n"
					/>
					</condition>
				</if>
			<if
				name="if_household_eq_y"
				disable="n"
				>
				<condition
					name="condition_household_eq_y"
					memo="if enable householding"
					>
					<![CDATA[ ($household eq "y") ]]>
					<assign
						dis_household="n"
					/>
					</condition>
				</if>
			<if
				name="if_verimove_eq_y"
				disable="n"
				>
				<condition
					name="condition_verimove_eq_y"
					memo="if enable verimove"
					>
					<![CDATA[ ($verimove eq "y") ]]>
					<assign
						dis_verimove="n"
					/>
					</condition>
				</if>
			<if
				name="if_pivot_track_eq_y"
				disable="n"
				>
				<condition
					name="condition_pivot_track_eq_y"
					memo="if enable pivot track"
					>
					<![CDATA[ ($pivot_track eq "y") ]]>
					<assign
						dis_pivot_track="n"
					/>
					</condition>
				</if>
			<if
				name="if_pivot_proof_eq_y"
				disable="n"
				>
				<condition
					name="condition_pivot_proof_eq_y"
					memo="if enable pivot proof"
					>
					<![CDATA[ ($pivot_proof eq "y") ]]>
					<assign
						dis_pivot_proof="n"
					/>
					</condition>
				</if>
			<if
				name="if_pivot_archive_eq_y"
				disable="n"
				>
				<condition
					name="condition_pivot_archive_eq_y"
					memo="if enable pivot archive"
					>
					<![CDATA[ ($pivot_archive eq "y") ]]>
					<assign
						dis_pivot_archive="n"
					/>
					</condition>
				</if>
			<if
				name="if_pivot_report_eq_y"
				disable="n"
				>
				<condition
					name="condition_pivot_report_eq_y"
					memo="if enable pivot report"
					>
					<![CDATA[ ($pivot_report eq "y") ]]>
					<assign
						dis_pivot_report="n"
					/>
					</condition>
				</if>
			<command
				stepname="print_stuff"
				disable="n"
				>
				<![CDATA[					
					print "
					site=$site
					psite=$psite
					csite=$csite
					msite=$msite
					asite=$asite
					location=$my_location
					location_code=$my_location_code
					printer=$my_printer
					printer_type=$my_printer_type
					doc_composer=$my_comp_type
					household=$my_household
					verimove=$my_verimove
					pivot_track=$my_pivot_track
					pivot_proof=$my_pivot_proof
					\n";					
								]]>
				</command>
			<subprocess
				name="choose_stock_codes"
				processname="stock_code_process"
				disable="n"
			/>
			<!-- Generate a client recon count file before possibly forking out into chunks -->
			<command
				name="perl_for_client_count_0$loop_counter"
				disable="n"
				>
			<![CDATA[
					use POSIX;
					# TODO: Add functionality to parse a trailer record
					$validsheetcount=0;
					$validpagecount=0;
					$validpackagecount=0;
					# determine input type for reconciliation type.
					open(my $IFH, "<", "$inwork") or die "Cannot open file $inwork - $!";
					if ($my_input_type =~ /pdf/i)
					{
					skip; #$validpackagecount = `cat $pre.extraccomb$post | wc -l`;
					}
					else
					{
					while (my $line = <$IFH>)
					{
					# get xml trailer values
					if ($my_input_type =~ /xml/i)
					
						{
					if ($line =~ /<audit>(\d+)<\/audit>/i)
					
							{
					$validpackagecount = $1;
					}
					}
					# get delimited trailer values
					elsif ($my_input_type =~ /pdf/i)
					
						{
					$validpackagecount = `cat $pre.extraccomb$post | wc -l`;
					}
					else
					
						{
					if ($line =~ /^TRAILER.(\d+)/i)
					
							{
					$validpackagecount = $1;
					}
					}
					}
					}
					close($IFH);
					# trim trailer from file
					if ($my_input_type !~ /xml/i)
					
				{
					`cp ${inwork} ${inwork}.ORIG`;
					`sed -i '/^TRAILER/d' ${inwork}`;
					}
					$validsheetcount = ceil($validpackagecount/2);
					$validpagecount = $validpackagecount;
			]]>
			</command>
		<module
			name="custom_client_recon_feed_0$loop_counter"
			modname="genrcx01"
			rcxdes="Custom Client Counts $loop_counter"
			rcxdocumentstotal="$validpackagecount"
			rcxopt="s"
			rcxpagestotal="$validpagecount"
			rcxrcn="$pre.client.counts"
			rcxsheetstotal="$validsheetcount"
			rcxtyp="client"
			disable="n"
		/>
		<if
			name="if_composer_eq_gmc"
			disable="n"
			>
			<condition
				name="condition_composer_eq_gmc"
				>
				<![CDATA[ ($doc_composer eq "gmc") ]]>
				<if
					name="if_gmc_type_eq_pdf"
					disable="n"
					>
					<condition
						name="condition_composer_eq_gmc"
						>
						<![CDATA[ ($gmc_input_type =~ /pdf/i) ]]>
						<subprocess
							name="compose_using_gmc"
							processname="pdfinput_process"
							disable="n"
						/>
						</condition>
					<else
						>
						<subprocess
							name="compose_using_gmc"
							processname="gmc_process"
							disable="n"
						/>
						</else>
					</if>
				</condition>
			<else
				>
				<subprocess
					name="compose_using_dialogue"
					processname="dialogue_process"
					disable="n"
				/>
				</else>
			</if>
		</process>
	<process
		name="mid_process"
		disable="n"
		>
		<module
			name="reconciliation_pre_$post"
			modname="genrcn01"
			emlbhtm="wrap"
			rcnbatt="$pre.rcnrpt$post"
			rcncc1f="\$programmer_email"
			rcnele="pre_post_recon"
			rcneml="y"
			rcnfr="\$project_manager_email"
			rcnin0="$pre.extrcncomb$post"
			rcnin9="$pre.client.counts"
			rcnto="\$project_manager_email"
			rcntto="\$programmer_email"
			rcntyp="pre"
			disable="n"
		/>
		<module
			stepname="gendie01"
			modname="gendie01"
			dierc="99"
			diemsg="Abort: Dying after break point."
			disable="y"
		/>
		<module
			name="household"
			modname="genhhd01"
			hhdinp="$pre.extraccomb$post"
			hhdcriteria="$hhd_option"
			hhdbuild="n"
			hhdele="householding"
			hhdext="$pre.hhdext$post"
			disable="$dis_household"
		/>
		<module
			stepname="gencpy01"
			modname="gencpy01"
			cpyinp="$pre.hhdsys$post"
			cpyout="HouseHoldReport$n.txt"
			disable="$dis_household"
		/>
		<if
			>
			<condition
				>
				<![CDATA[ ($household eq "y") ]]>
				<assign
					batext="$pre.hhdext$post"
				/>
				</condition>
			<else
				>
				<assign
					batext="$pre.extraccomb$post"
				/>
				</else>
			</if>
		<module
			name="verimove"
			modname="genvmv02"
			vmvid="$my_vmvid"
			vmvkey_start="34"
			vmvkey_length="10"
			vmvwat="y"
			vmvupd="2"
			vmvinp="$batext"
			disable="$dis_verimove"
		/>
		<if
			>
			<condition
				>
				<![CDATA[ ($verimove eq "y") ]]>
				<assign
					batext="$pre.vmvout$post"
				/>
				</condition>
			</if>
		<module
			name="batching"
			modname="genbat01"
			batinp="$batext"
			batequ="y"
			batopt="y"
			optimize_insert_plans="y"
			disable="n"
		/>
		</process>
	<process
		name="post_process"
		reset_files="y"
		disable="n"
		>
		<assign
			name="assign_msize_l"
			mailgroup="1"
			maxsheets="5"
			disable="n"
		/>
		<if
			name="if_mailsort_yes_$batchid$c"
			disable="n"
			>
			<condition
				name="condition_mailsort_yes_$batchid$c"
				disable="n"
				>
				<![CDATA[ ($msort eq "y") ]]>
				<module
					name="mailsort_$batchid$c"
					modname="genmst07"
					comment_l1="______________"
					comment_l2="______________"
					msacsw="y"
					mscpi="n"
					msembsw="n"
					msflgsw="n"
					msimbii="n"
					msimfcd="f"
					msimfsd="y"
					msimfun="p"
					msimmid="106952"
					msimmln="6"
					msimocri=""
					msimomid="2815320"
					msimomil="6"
					msimopt="2"
					msimpmid="106952"
					msimpmil="6"
					msimpop="b"
					msimsln="6"
					msimspn="0"
					msimssw="a"
					msimstc="260"
					msimstc2="300"
					msinssw="n"
					msmeter="y"
					msmum="5"
					mspni="y"
					mstatr="${runpath}batat$msize.txt"
					mstinp="$postfile"
					mszp4bc="I"
					release="$lvl"
					disable="n"
				/>
				<module
					name="msort_cat_$batchid$c"
					modname="gencat01"
					catapp="n"
					catinp="$pre.msort$post,$pre.foregn$post,$pre.specal$post,$pre.nomail$post,"
					catout="$pre.catout$post"
					disable="n"
				/>
				<subprocess
					name="print_msort_reports_$batchid$c"
					processname="msort_reports_process"
					disable="n"
				/>
				</condition>
			<else
				name="else"
				disable="n"
				>
				<module
					name="non_msort_move_$batchid$c"
					modname="genmov01"
					movinp="$postfile"
					movout="$pre.catout$post"
					disable="n"
				/>
				</else>
			</if>
		<assign
			name="assign_test_qrecs_values_$batchid$c"
			qrecs="1"
			disable="p"
		/>
		<assign
			name="assign_prod_qrecs_values_$batchid$c"
			qrecs="10"
			disable="t"
		/>
		<module
			name="flag_proofs_$batchid$c"
			modname="gensrt01"
			srtele="flag_proofs"
			srtinp="$pre.catout$post"
			srtout="$pre.prfout$post"
			disable="n"
		/>
		<!-- ================================================================================================ -->
		<!-- Select order of sequence numbers -->
		<!-- ================================================================================================ -->
		<subprocess
			name="determine_order_of_sequences"
			processname="sequence_order_process"
			disable="n"
		/>
		<module
			name="merge_$batchid$c"
			modname="genmrg01"
			adf_type="mrdf"
			compression_level="5"
			crfsnd="y"
			epcsnd="y"
			_pwrstrm_composer="other"
			merge_type="print"
			mrgbat="${runpath}batinf.txt"
			mrgext="$pre.prfout$post"
			mrgimg="$pre.inimg$copy_base"
			mrghhd="$prev.hhdimf$copy_base"
			mrgrsc="${genparms}pdf.pdf"
			reset_qual_info="n"
			disable="n"
		/>
		<!-- ================================================================================================ -->
		<!-- END order of sequence numbers -->
		<!-- ================================================================================================ -->
		<module
			name="generate_pdf_proof_file_$batchid$c"
			modname="genpdx02"
			pdxcombo="y"
			pdxidx="$pre.repext$post"
			pdxout="$pre.${mask_base}oxxxx.c$c$batch.cr00"
			pdxproofs="y"
			pdxtyp="pdf"
			pdxzip="n"
			disable="n"
		/>
		<!-- ================================================================================================ -->
		<!-- START Pivot Process -->
		<!-- ================================================================================================ -->
		<subprocess
			name="pivot_archive"
			processname="pivot_archiving_process"
			disable="$dis_pivot_archive"
		/>
		<subprocess
			name="pivot_report"
			processname="pivot_reporting_process"
			disable="$dis_pivot_report"
		/>
		<subprocess
			name="pivot_proof"
			processname="pivot_proof_process"
			disable="$dis_pivot_proof"
		/>
		<subprocess
			name="pivot_tracking"
			processname="pivot_tracking_process"
			disable="$dis_pivot_track"
		/>
		<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
		<!-- END Pivot Process -->
		<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
		<!-- ================================================================================================ -->
		<!-- Determine what printer process to use -->
		<!-- ================================================================================================ -->
		<!-- ================================================================================================ -->
		<!-- START Facility Print Send Section -->
		<!-- ================================================================================================ -->
		<subprocess
			name="select_site_for_print"
			processname="site_select_process"
			disable="n"
		/>
		<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
		<!-- END Facility Print Send Section -->
		<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
		<module
			name="tapeless_$batchid$c"
			modname="gentpl01"
			_tplsuf="$my_tplsuf"
			_tplext=".pdf"
			tpllst="$pre.outlst$post"
			tplpri="com"
			disable="y"
		/>
		<module
			name="email_outfrp_$batchid$c"
			modname="geneml01"
			emlbatt="$pre.outfrp$post"
			emlbody="See attached report"
			emlfr="\$project_manager_email"
			emlsub="$PI Order: $n Copy: $c Batch: $batch File: $infile Completed"
			emlto="\$project_manager_email,\$programmer_email"
			emltto="\$programmer_email"
			disable="n"
		/>
		<subprocess
			name="print_reports_$batchid$c"
			processname="print_reports_process"
			disable="n"
		/>
		</process>
	<process
		name="print_reports_process"
		disable="n"
		>
		<module
			name="concatenate_outfrp_reports_$batchid$c"
			modname="gencat01"
			catapp="n"
			catinp="$pre.outfrp$post,$pre.outplg$post,$pre.outppr$post,$runpath$PI$n$run$c$BATCH$PJT${SBU}_prpt.txt"
			catout="$pre.prod$post.reports.txt"
			pre="$runpath$site$lvl.$sbu.$pi$n.$pjt"
			runpath="/bcs/$psite$lvl/clientapp/$pi$pjt/run/$rundir/"
			disable="n"
		/>
		<module
			name="print_print_reports_$batchid$c"
			modname="genprr01"
			prrinp="$pre.prod$post.reports.txt"
			prrcls="print"
			disable="t"
		/>
		</process>
	<process
		name="msort_reports_process"
		disable="n"
		>
		<routine
			filename="$genskels\ms_tray_tag_formatter.pl"
			function="ms_traytag_formatter"
			memo="routine inputs $pre.msvtagt$post and outputs $pre.msrptagos$post.txt"
			stepname="ms_tray_tag_formatter"
			disable="n"
		/>
		<module
			name="generate_traytag_labels"
			modname="genlbl01"
			lblele="traytaglabels"
			lblinp="$pre.msrptagos$post.txt"
			lblselect="n"
			lblxmit="n"
			pdfout="$pre.msrptag$post.pdf"
			disable="n"
		/>
		<module
			modname="genxmt01"
			stepname="genxmt01"
			xmtcfg="mrpt"
			xmtinp="$pre.msrptag$post.pdf"
			xmtout="$ffile.msrptag$post.pdf"
			disable="y"
		/>
		<module
			name="concatenate_mailsort_reports_$batchid$c"
			modname="gencat01"
			catapp="n"
			catinp="$pre.attraudt.audtrpt$post.txt,$pre.code1pls.prntrpt$post.txt,$pre.msdr00.manifest$post.txt,$pre.msdr00.msrprpt$post.txt,$pre.msdr00.msrprpt2$post.txt,$pre.msdr00.msrpstm$post.txt,$pre.mspstrpt.report01$post.txt"
			catout="$pre.msort$post.reports.txt"
			pre="$runpath$site$lvl.$sbu.$pi$n.$pjt"
			runpath="/bcs/$psite$lvl/clientapp/$pi$pjt/run/$rundir/"
			disable="n"
		/>
		<module
			name="print_heldms_msort_reports_$batchid$c"
			modname="genprr01"
			prrcls="heldms"
			prrinp="$pre.msort$post.reports.txt"
			disable="t"
		/>
		</process>
	<process
		name="final_process"
		disable="n"
		>
		<module
			name="cat_recons"
			modname="gencat01"
			catinp="$pre.mrgrcn*,$pre.hhdrcn*,$pre.ins_rcn*,$pre.extrcncomb*"
			catout="$pre.rcncat$post"
			catapp="n"
			disable="n"
		/>
		<module
			name="reconciliation_post"
			modname="genrcn01"
			rcnele="post_recon"
			rcntyp="post"
			rcneml="y"
			rcnfr="\$project_manager_email"
			rcntto="\$project_manager_email, \$programmer_email"
			rcnto="\$project_manager_email, \$programmer_email"
			rcncc1f="\$project_manager_email"
			rcnrpt="$pre.rcnrpt_post$post.txt"
			rcnatt="$pre.rcnrpt_post$post.txt"
			_rcnin0="$pre.extrcn.combined"
			rcnin1="$pre.rcncat$post"
			disable="n"
		/>
		<!-- This works because mrdf files are transferred back to this _00 rundir after each copy completes -->
		<module
			name="transmit_mrdf"
			modname="genmft01"
			mftdir="$runpath"
			mftmsk="_mrdf.txt"
			disable="t"
		/>
		<module
			name="generd02_call"
			modname="generd02"
			ptkversion="/apps/pdftk_2.01/bin/pdftk"
			erdlevel="$erd_type"
			disable="t"
		/>
		<!-- Archive Final Process 00 -->
		<module
			name="archiving_copy_module"
			modname="genarc03"
			arcclean="n"
			arcdays="30"
			arcstore="t"
			arcstorename="$pi${n}_${c}.gtar"
			arcstoredays="30"
			disable="n"
		/>
		</process>
	<!-- The End -->
	<!-- Pivot Processes -->
	<process
		name="pivot_proof_process"
		>
		<assign
			name="set_values_pivot_proof_$batchid$c"
			pivot_clientid="$pivot_id"
			pivot_transid="109"
			pivot_xmitcount="#SEQ#"
		/>
		<module
			name="pivot_proof_$batchid$c"
			modname="pivot"
			pivot_run="all"
			pivot_type="pprofv1"
			pivot_proof_from_crite="y"
			pivot_crite_in="$pre.${mask_base}oxxxx.c$c$batch.cr00"
			_pivot_crite_in="$pre.proof_out$c"
			pivot_file_name="${PIVOT_CLIENTID}_${MSITEC}_${LVLI3}_${pivot_transid}_${date}_${pivot_xmitcount}"
			pivot_idx_out="${runpath}${pivot_file_name}_${n}${c}${batch}${run}.txt"
			pivot_adt_out="${runpath}${pivot_file_name}_${n}${c}${batch}${run}.adt"
			pivot_pdf_name="${pivot_file_name}_${n}${c}${batch}${run}.pdf"
			pivot_proof_desc="Proof for_${pi}${pjt}${n}${c}${batch}${run} - ${date}"
			pivot_proof_type="A"
			pivot_chunk_index="y"
			pivot_chunk_qty="2500"
			xmtcfg="internetpci"
			disable="n"
		/>
		</process>
	<process
		name="pivot_reporting_process"
		>
		<assign
			name="set_values_pivot_report_viewer"
			pivot_rv_clientid="$pivot_id"
			pivot_rv_transid="106"
			pivot_rv_xmitcount="001"
			pivot_rv_jobcode="QLT0001A"
			disable="n"
		/>
		<module
			name="pivot_report_viewer"
			modname="pivot_report_viewer"
			pivot_rv_type="csv"
			pivot_rv_reportname="$inwork"
			pivot_rv_filename="${PIVOT_RV_CLIENTID}_${MSITEC}_${LVLI3}_${pivot_rv_transid}_${date}_${PIVOT_RV_XMITCOUNT}_reportv2"
			pivot_rv_idx_out="${runpath}${pivot_rv_filename}_IDX_001_${n}${c}${batch}${run}.idx"
			pivot_rv_adt_out="${runpath}${pivot_rv_filename}_IDX_001_${n}${c}${batch}${run}.adt"
			pivot_rv_file_out="${runpath}${pivot_rv_filename}_IDX_001_${n}${c}${batch}${run}.pdf"
			pivot_rv_rec_qty="51475"
			pivot_rv_xmit="y"
			xmtcfg="internetpci"
			pivot_rv_xmtovr="true"
			disable="n"
		/>
		</process>
	<process
		name="pivot_tracking_process"
		>
		</process>
	<process
		name="pivot_archiving_process"
		>
		<assign
			name="set_values_pivot"
			pivot_clientid="$pivot_id"
			pivot_xmitcount="#SEQ#"
			pivot_transid="107"
			disable="n"
		/>
		<module
			name="pivot_archive_$batchid$c"
			modname="pivot"
			sol_val="y"
			pivot_run="all"
			pivot_type="parchv2"
			pivot_ele="pivot_archive"
			pivot_idx_in="$pre.repext$post"
			pivot_file_name="${PIVOT_CLIENTID}_S_${LVLI3}_${pivot_transid}_${date}_${PIVOT_XMITCOUNT}_archive_v2"
			pivot_idx_out="${runpath}${pivot_file_name}_IDX_001_${n}${c}${batch}${run}.idx"
			pivot_adt_out="${runpath}${pivot_file_name}_IDX_001_${n}${c}${batch}${run}.adt"
			pivot_pdf_name="${pivot_file_name}_IDX_001_PDF_001_${n}${c}${batch}${run}.pdf"
			pivot_chunk_index="y"
			pivot_chunk_qty="5000"
			pivot_xmit="y"
			xmtcfg="internetpci"
			merge_type="parchv2"
			disable="n"
		/>
		</process>
	<!-- Reprint Process -->
	<process
		name="reprint_process"
		disable="n"
		>
		<assign
			disable="n"
			inreprint="%%REPRINT"
			sitepath="/bcs/$site$lvl/input/"
		/>
		<module
			name="pre_setup_prod_dp_$v"
			modname="genpre01"
			infile="$sitepath$inreprint"
			precpy="m"
			preorg="y"
			disable="t"
		/>
		<module
			name="pre_setup_test_dp_$v"
			modname="genpre01"
			infile="$sitepath$inreprint"
			precpy="y"
			preorg="y"
			disable="p"
		/>
		<subprocess
			name="choose_stock_codes"
			processname="stock_code_process"
			disable="n"
		/>
		<subprocess
			name="determine_order_of_sequences"
			processname="sequence_order_process"
			disable="n"
		/>
		<module
			name="missing_numbers_$v"
			modname="genmis01"
			compression_level="5"
			crfsnd="n"
			epcsnd="n"
			jobtype="missing numbers"
			merge_type="print"
			misdat="$pre.repext$post"
			misget="n"
			misinp="$inwork"
			misrmd="n"
			mistpl="n"
			mistyp="auto"
			mrgbat="${runpath}batinf.txt"
			mrgext="$matout"
			mrgimg="$pre.inimg$copy_base"
			mrgrsc="${genparms}pdf.pdf"
			q_freq="0"
			qrecs="0"
			repmask="${mask_base}o${mask_id}.c$rep_c$jobid.d$v"
			reprint_defaults="y"
			disable="n"
		/>
		<subprocess
			name="select_site_for_print"
			processname="site_select_process"
			disable="n"
		/>
		<module
			name="email"
			modname="geneml01"
			emlto="\$project_manager_email,\$form_recovery_email"
			emlfr="\$project_manager_email"
			emlsub="$PI Order: $n Copy: $c Batch: $batch Job: $jobid Reprints Completed"
			emlbody="Reprints complete"
			emlatt="$pre.dmgfrp$post"
			disable="n"
		/>
		</process>
	</processes>
<printdriver
	add_font_dir="%%usrparms"
	add_image_dir="%%usrparms"
	adf_type="%%adf_type"
	break_quantity="%%chunk_qty"
	break_type="%%brk_type"
	break_unit="sysda"
	disk_option="%%diskoption"
	dp_bar_start="S"
	dp_bar_stop="T"
	float_address="down"
	household="%%household"
	hwrk="%%mrghhd"
	inext="%%mrgext"
	inimg="%%extinp"
	merge_type="%%merge_type"
	mrdf_type="copy"
	printer_type="%%printer_type"
	outadf="%%mrgadf"
	outepc="%%mrgepc"
	outext="%%extrac"
	outfrp="%%mrgfrp"
	outhst="%%mrghst"
	outimg="%%mrgcrt"
	outlst="%%mrglst"
	outplg="%%mrgplg"
	outppr="%%mrgppr"
	outrce="%%extrcn"
	outrcm="%%mrgrcn"
	outrpt="%%mrgaud"
	outsid="%%extsid"
	outsse="%%extaud"
	outssm="%%mrgaud"
	outzrp="%%mrgzrp"
	recon_key_value="%%RECON_STEP_NAME"
	record_limit="999999999"
	recovery_files="n"
	repext="%%mrgrex"
	resadd="%%mrgrsc"
	reset_quality_info="%%reset_qual_info"
	resource="%%extres"
	standardize_orientations="3"
	subext="%%mrgsub"
	work="%%extsto"
	keep_page_markers="y"
	_native_companion_file="%%native_companion_file"
	_tray_companion_file="%%tray_companion_file"
	disable="n"
	>
	<!-- IF %%doc_composer EQ 'GMC' -->
	<file
		name="input01"
		composer="%%pwrstrm_composer"
		data_type="pdf"
		dpi="300"
		duplex="y"
		escape_characters="y"
		footer="auto"
		header="auto"
		page_height="792"
		page_width="612"
		record_delimiter="text"
		xpdf_parse="y"
		mix_resources="y"
		disable="n"
		>
		<document
			reference_type="native"
			reference="GENEXTRACT"
			reference_code="ascii"
			location="first"
			object="record"
			name="document"
			disable="n"
		/>
		<field
			name="addr_delete"
			dependent="y"
			disposition="d"
			index="1"
			length="25"
			orientation="p"
			pass="first"
			reference_code="ascii"
			variable="y"
			page="first"
			window_top="90"
			window_bottom="185"
			window_left="0"
			window_right="250"
			BACKGROUND_COLOR="7"
			extract_start="2801"
			extract_length="25"
			background_color="2"
			disable="n"
		/>
		</file>
	<quality
		name="quality"
		quality_records="y"
		quality_frequency="%%qrec_freq"
		quality_frequency_start="%%qrec_start"
		quality_makeready="%%qrecs"
		quality_type="%%qrec_type"
		quality_image="n"
		disable="n"
	/>
	<!-- %%ELSE -->
	<file
		name="input01"
		composer="dialogue"
		data_type="pdf"
		dpi="300"
		duplex="y"
		escape_characters="y"
		footer="auto"
		header="auto"
		page_height="792"
		page_width="612"
		record_delimiter="text"
		xpdf_parse="y"
		disable="n"
		>
		<document
			reference_type="native"
			reference="GENEXTRACT"
			reference_code="ascii"
			location="first"
			object="record"
			name="document"
			disable="n"
		/>
		<field
			name="addr_delete"
			dependent="y"
			disposition="d"
			index="1"
			length="25"
			orientation="p"
			pass="first"
			reference_code="ascii"
			variable="y"
			page="first"
			window_bottom="246"
			window_top="152"
			window_left="60"
			window_right="340"
			BACKGROUND_COLOR="7"
			extract_start="2801"
			extract_length="25"
			background_color="2"
			disable="n"
		/>
		</file>
	<quality
		name="quality"
		quality_records="y"
		quality_frequency="%%qrec_freq"
		quality_frequency_start="%%qrec_start"
		quality_makeready="%%qrecs"
		quality_type="%%qrec_type"
		quality_image="n"
		disable="n"
	/>
	<!-- %%ENDIF -->
	<script
		name="script"
		disable="n"
		>
		<extract
			name="extract"
			disable="n"
			>
			<after_document
				name="after_document"
				disable="n"
				>
				<function
					name="EXTRACT"
					start="968"
					value="%%paper_stock"
					comment="paper1"
					disable="n"
				/>
				<function
					name="EXTRACT"
					start="961"
					value="%%ome_stock"
					comment="OME"
					disable="n"
				/>
				<function
					name="EXTRACT"
					comment="mail_code"
					start="814"
					value="M"
					disable="n"
				/>
				<function
					name="EXTRACT"
					comment="set_level"
					start="1236"
					value="l"
					disable="n"
				/>
				</after_document>
			</extract>
		</script>
	<output
		name="output01"
		disable="n"
		>
		%%INCLUDE ${include_dir}${msite}/${outobject_type}.xml 
		</output>
	</printdriver>
<genbatch
	inext="%%batinp"
	outrej="%%batrej"
	suppress_empty_files="y"
	reject_abend_percent="0"
	thickness_factor="1.2"
	file_level="copy"
	postclass="1"
	ratetype="r"
	file_name_case="l"
	name="genbatch"
	disable="n"
	>
	<paper
		name="paper1"
		stock_code="%%paper_stock"
		weight="%%paper_weight"
		thickness="%%paper_thickness"
		description="Paper"
		disable="n"
	/>
	<papergroup
		code="A"
		paper1="%%paper_stock"
		source1="tray1"
		description="paper group1 "
		disable="n"
	/>
	<ome
		stock_code="%%ome_stock"
		weight="%%ome_weight"
		thickness="%%ome_weight"
		width="9.25"
		length="4.125"
		fold="z"
		description=""
		name="#10"
		disable="n"
	/>
	<copy
		number="01"
		paper_group="A"
		inserter="PB08STD"
		description="copy 01"
		name="copy"
		disable="n"
	/>
	<superset
		name="superset"
		disable="n"
		>
		<set
			name="l"
			description="copy 1"
			disable="n"
		/>
		</superset>
	<!-- If msize is 'l' mail_group = 1 and max_sheets = 5 -->
	<!-- If msize is 'e' mail_group = 2 and max_sheets = 9 -->
	<!-- If msize is 'f' mail_group = 3 and max_sheets = 15 -->
	<basebatch
		copy="01"
		description="basebatch1"
		mail_group="%%mailgroup"
		max_sheets="%%maxsheets"
		ome="%%ome_stock"
		sets="*********"
		disable="n"
	/>
	<basebatch
		copy="01"
		description="basebatch2"
		mail_group="9"
		max_sheets="9999"
		ome="000000"
		sets="*********"
		disable="n"
	/>
	</genbatch>
<genlabel
	name="traytaglabels"
	add_font_dir="%%genfreefonts"
	add_image_dir="%%usrparms"
	inext="%%lblinp"
	outlbl="%%lblout"
	outpdf="%%pdfout"
	outsys="%%lblsys"
	resadd="%%lblres"
	x_scale=".8"
	disable="n"
	>
	<label
		name="label"
		xoffset="96"
		yoffset="43"
		disable="n"
	/>
	<label
		name="label"
		xoffset="96"
		yoffset="186"
		disable="n"
	/>
	<label
		name="label"
		xoffset="96"
		yoffset="329"
		disable="n"
	/>
	<label
		name="label"
		xoffset="96"
		yoffset="472"
		disable="n"
	/>
	<label
		name="label"
		xoffset="96"
		yoffset="615"
		disable="n"
	/>
	<label
		name="label"
		xoffset="398"
		yoffset="43"
		disable="n"
	/>
	<label
		name="label"
		xoffset="398"
		yoffset="186"
		disable="n"
	/>
	<label
		name="label"
		xoffset="398"
		yoffset="329"
		disable="n"
	/>
	<label
		name="label"
		xoffset="398"
		yoffset="472"
		disable="n"
	/>
	<label
		name="label"
		xoffset="398"
		yoffset="615"
		disable="n"
	/>
	<label_object
		name="printer_line"
		font="Helvetica"
		font_size="6"
		length="28"
		orientation="P"
		start="1"
		type="text"
		xoffset="1"
		yoffset="16"
		disable="n"
	/>
	<label_object
		name="postal_destination_name"
		font="Helvetica"
		font_size="8"
		length="23"
		orientation="P"
		start="30"
		type="text"
		xoffset="1"
		yoffset="24"
		disable="n"
	/>
	<label_object
		name="cin_description"
		font="Helvetica"
		font_size="8"
		length="28"
		orientation="P"
		start="54"
		type="text"
		xoffset="1"
		yoffset="33"
		disable="n"
	/>
	<label_object
		name="mailer_name_city_state"
		font="Helvetica"
		font_size="6"
		length="14"
		orientation="P"
		start="83"
		type="text"
		xoffset="1"
		yoffset="39"
		disable="n"
	/>
	<label_object
		name="mailer_id"
		font="Helvetica"
		font_size="6"
		length="6"
		orientation="P"
		start="98"
		type="text"
		xoffset="147"
		yoffset="39"
		disable="n"
	/>
	<label_object
		name="zip_3_5"
		font="Helvetica"
		font_size="18"
		length="5"
		orientation="P"
		start="105"
		type="text"
		xoffset="185"
		yoffset="26"
		disable="n"
	/>
	<label_object
		name="route"
		font="Helvetica"
		font_size="12"
		length="4"
		orientation="P"
		start="111"
		type="text"
		xoffset="205"
		yoffset="40"
		disable="n"
	/>
	<label_object
		name="barcode"
		font="code128.ttf"
		font_size="56"
		length="24"
		orientation="P"
		start="116"
		type="text"
		xoffset="0"
		yoffset="104"
		disable="n"
	/>
	<label_object
		name="barcode_spaced"
		font="Helvetica"
		font_size="6"
		length="27"
		orientation="P"
		start="141"
		type="text"
		xoffset="87"
		yoffset="122"
		disable="n"
	/>
	<label_object
		name="mailers_area"
		font="Helvetica"
		font_size="6"
		length="33"
		orientation="P"
		start="169"
		type="text"
		xoffset="93"
		yoffset="133"
		disable="n"
	/>
	</genlabel>
<gensort
	name="flag_proofs"
	input="%%srtinp"
	output="%%srtout"
	outsys="%%srtsys"
	record_length="3000"
	flag_only="y"
	flag_position="125"
	flag_value="Y"
	endrec="10"
	disable="n"
/>
<genhold
	name="householding"
	inext="%%hhdinp"
	outhhd="%%hhdext"
	outhold="%%hhdimf"
	outsys="%%hhdsys"
	outrcn="%%hhdrcn"
	criteria="%%hhdcriteria"
	user_offset="%%hhdoff"
	user_length="%%hhdlen"
	disable="n"
/>
<genrecon
	name="pre_post_recon"
	client="%%client"
	client_code="%%client_code"
	project="%%project"
	project_code="%%project_code"
	location_code="%%location_code"
	order="%%or"
	run="%%run"
	copy="%%c"
	batch="%%batch"
	rcninp="%%rcninp"
	rcndat="%%rcndat"
	rcnrpt="%%rcnrpt"
	report_type="%%rcntyp"
	documents="report"
	pages="report"
	sheets="report"
	disable="n"
/>
<genindexer
	name="pivot_archive"
	index_type="%%pivot_type"
	inext="%%pivot_idx_in"
	outpvtidx="%%pivot_idx_out"
	outpvtadt="%%pivot_adt_out"
	chunk_index="%%pivot_chunk_index"
	pivot_client_app_id="%%PIVOT_CLIENTID"
	pivot_customer_id_start="34"
	pivot_customer_id_length="25"
	pivot_customer_id_trim="y"
	pivot_reference_no="%%or"
	pivot_document_date_start="1"
	pivot_document_date_length="8"
	pivot_document_date_trim="y"
	pdfname="%%pivot_pdf_name"
	filename="%%date%%n%%c%%batch%%._"
	filenamestart="34"
	filenamelength="25"
	filesequence="y"
	filedate="y"
	pagecountstart="112"
	pagecountlength="12"
	initial_page_offset="1"
	pivot_xmit_server="cfs"
	disable="n"
	>
	<indexkey
		name="addr1"
		start="413"
		length="50"
		order="1"
		trim="y"
		disable="n"
	/>
	<indexkey
		name="addr2"
		start="463"
		length="50"
		order="2"
		trim="y"
		disable="n"
	/>
	<indexkey
		name="addr3"
		start="513"
		length="50"
		order="3"
		trim="y"
		disable="n"
	/>
	<indexkey
		name="addr4"
		start="563"
		length="50"
		order="4"
		trim="y"
		disable="n"
	/>
	<indexkey
		name="addr5"
		start="613"
		length="50"
		order="4"
		trim="y"
		disable="n"
	/>
	</genindexer>
<genimpose
	name="imposition"
	input="%%nupinp"
	inpages="%%nup_pages_arr_sorted"
	output="%%nupout"
	outsys="%%nupsys"
	data_type="%%nup_data_type"
	data_type_out="%%nup_data_type_out"
	page_width="%%nup_page_width"
	page_height="%%nup_page_height"
	page_width_out="%%nup_page_width_out"
	page_height_out="%%nup_page_height_out"
	pad_sheets="%%nup_pad_sheets"
	pad_stacks="%%nup_pad_stacks"
	doc_order="%%nup_doc_order"
	page_order="%%nup_page_order"
	fill_order="%%nup_fill_order"
	columns="%%nup_columns"
	rows="%%nup_rows"
	depth="%%nup_depth"
	column_margin="%%nup_column_margin"
	column_gutter="%%nup_column_gutter"
	column_order="%%nup_column_order"
	column_creep="%%nup_column_creep"
	row_margin="%%nup_row_margin"
	row_gutter="%%nup_row_gutter"
	row_order="%%nup_row_order"
	row_creep="%%nup_row_creep"
	scale="%%nup_scale"
	duplex="%%nup_duplex"
	compression="%%nup_compression"
	front_rotation1="%%nup_front_rotation1"
	front_rotation2="%%nup_front_rotation2"
	back_rotation1="%%nup_back_rotation1"
	back_rotation2="%%nup_back_rotation2"
	alternate="%%nup_alternate"
	use_temp="%%nup_use_temp"
	disk_option="%%nup_diskoption"
	disable="n"
/>
<information
	architecture="%%arch"
	order_number="%%n"
	copy_number="%%c"
	run_id="%%run"
	batch_id="%%batch"
	year_loc="%%yl"
	run_date="%%date"
	run_time="%%time"
	xxmail_date="%%order_epic_mail_date"
	sbu="%%sbu"
	level="%%lvl"
	jobtype="%%jobtype"
	release="%%release"
	reprint_run="%%reprint_run"
	reprint="%%reprint"
	name="information"
	disable="n"
/>
</powerstream>
